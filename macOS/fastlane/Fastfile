require_relative "spaceship_patch"

default_platform(:mac)

platform :mac do
  lane :package do
    UI.message "Starte Build-Prozess für XToolMac"

    # Wir sind bereits in macOS/
    xcodegen(
      spec: "project.yml",
      project: "XToolMac.xcodeproj"
    )

    sh(
      "xcodebuild",
      "-project", "XToolMac.xcodeproj",
      "-scheme", "XToolMac",
      "-configuration", "Release",
      "-derivedDataPath", "../Build/DerivedData",
      "BUILD_DIR=../Build/Output",
      "CODE_SIGNING_ALLOWED=NO",
      "CODE_SIGN_IDENTITY="
    )

    UI.success "✅ Build abgeschlossen"
  end
end
